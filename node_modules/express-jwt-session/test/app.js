var express = require('express');
var app = express();
var jws = require('../index.js');

var secret = 'mysecret';
var isAuthenticated = jws.isAuthenticated(secret);


app.get('/getWithAuth', isAuthenticated, function(req, res) {
	res.send(req.user);
});

app.get('/setAuth', function(req, res) {
	var token = jws.signToken({email:'test@test.com', name:'test'}, secret, 150);
	res.json({token : token});
});

module.exports = app.listen(8000);